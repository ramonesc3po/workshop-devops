#!/usr/local/env groovy

/*
  Provision terraform webapp
*/

pipeline {
  agent any

  environment {
   TERRAFORM = 'docker run hashicorp/terraform:light'
  }

  stages {
    stage('build') {
      steps {
        checkout scm
        sh 'docker pull hashicorp/terraform:light'
        echo build
        sh '${TERRAFORM} init'
      }
    }

    stage('plan') {
      steps {
        echo plan
      }
    }
  }
}